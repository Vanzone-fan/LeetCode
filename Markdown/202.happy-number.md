# 2024-07-28

**最原始的代码**

```javascript
/*
 * @lc app=leetcode id=202 lang=javascript
 *
 * [202] Happy Number
 */

// @lc code=start
/**
 * @param {number} n
 * @return {boolean}
 */
var isHappy = function (n) {
	sum = calc(n);
	while (sum >= 10) {
		sum = calc(sum);
	}
	if (sum === 1 || sum === 7) {
		return true;
	}
	return false;
};

/**
 * @param {number} n
 * @return {boolean}
 */
function calc(n) {
	sum = 0;
	while (n > 0) {
		digit = n % 10;
		sum += digit * digit;
		n = Math.floor(n / 10);
	}
	console.log(sum);
	return sum;
}
// @lc code=end
isHappy(1111111);
```

**出现的问题**

-   有种面向结果编程的美感：在 1 or 7 的情况下返回 true

**leetcode solution**

```javascript
var isHappy = function (n) {
	if (n < 10) {
		if (n === 1 || n === 7) {
			return true;
		}
		return false;
	}
	let total = 0;
	while (n > 0) {
		let sq = n % 10;
		total += sq ** 2;
		n -= sq;
		n /= 10;
	}
	if (total === 1) {
		return true;
	}
	return isHappy(total);
};
```

**代码评估**

-   思路一致
-   代码更简洁

# 2024-09-21 二刷

```js
const isHappy = n => {
	const set = new Set();
	while (n !== 1 && !set.has(n)) {
		set.add(n);
		const array = Array.from(n.toString());
		n = array.reduce((previousValue, currentValue) => previousValue + currentValue ** 2, 0);
	}
	return n === 1;
};
```
